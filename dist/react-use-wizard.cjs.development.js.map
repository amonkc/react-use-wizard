{"version":3,"file":"react-use-wizard.cjs.development.js","sources":["../src/wizardContext.ts","../src/useWizard.ts","../src/logger.ts","../src/wizard.tsx"],"sourcesContent":["import * as React from 'react';\r\n\r\nimport { WizardValues } from './types';\r\n\r\nconst WizardContext = React.createContext<WizardValues | null>(null);\r\n\r\nif (__DEV__) {\r\n  WizardContext.displayName = 'WizardContext';\r\n}\r\n\r\nexport default WizardContext;\r\n","import * as React from 'react';\r\n\r\nimport { WizardValues } from './types';\r\nimport WizardContext from './wizardContext';\r\n\r\nconst useWizard = () => {\r\n  const context = React.useContext(WizardContext);\r\n\r\n  if (!context && __DEV__) {\r\n    throw Error('Wrap your step with `Wizard`');\r\n  } else {\r\n    return context as WizardValues;\r\n  }\r\n};\r\n\r\nexport default useWizard;\r\n","import { LogLevel } from './types';\r\n/**\r\n * Log messages in the console with a corresponding urgency\r\n *\r\n * @param level The urgency of the message\r\n * @param message The message to log in the console\r\n */\r\nexport const log = (level: LogLevel, message: string) => {\r\n  if (__DEV__) {\r\n    const packageName = '[react-use-wizard]';\r\n\r\n    switch (level) {\r\n      case 'warn':\r\n        console.warn(`${packageName} ${message}`);\r\n        break;\r\n      case 'error':\r\n        console.error(`${packageName} ${message}`);\r\n        break;\r\n      default:\r\n        console.log(`${packageName} ${message}`);\r\n    }\r\n  }\r\n};\r\n","import * as React from 'react';\r\n\r\nimport * as logger from './logger';\r\nimport { Handler, WizardProps } from './types';\r\nimport WizardContext from './wizardContext';\r\n\r\nconst Wizard: React.FC<React.PropsWithChildren<WizardProps>> = React.memo(\r\n  ({\r\n    header,\r\n    footer,\r\n    children,\r\n    onStepChange,\r\n    wrapper: Wrapper,\r\n    startIndex = 0,\r\n  }) => {\r\n    const [activeStep, setActiveStep] = React.useState(startIndex);\r\n    const [isLoading, setIsLoading] = React.useState(false);\r\n    const hasNextStep = React.useRef(true);\r\n    const hasPreviousStep = React.useRef(false);\r\n    const nextStepHandler = React.useRef<Handler>(() => {});\r\n    const stepCount = React.Children.toArray(children).length;\r\n\r\n    hasNextStep.current = activeStep < stepCount - 1;\r\n    hasPreviousStep.current = activeStep > 0;\r\n\r\n    const goToNextStep = React.useCallback(() => {\r\n      if (hasNextStep.current) {\r\n        const newActiveStepIndex = activeStep + 1;\r\n\r\n        setActiveStep(newActiveStepIndex);\r\n        onStepChange && onStepChange(newActiveStepIndex);\r\n      }\r\n    }, [activeStep, onStepChange]);\r\n\r\n    const goToPreviousStep = React.useCallback(() => {\r\n      if (hasPreviousStep.current) {\r\n        nextStepHandler.current = null;\r\n        const newActiveStepIndex = activeStep - 1;\r\n\r\n        setActiveStep(newActiveStepIndex);\r\n        onStepChange && onStepChange(newActiveStepIndex);\r\n      }\r\n    }, [activeStep, onStepChange]);\r\n\r\n    const goToStep = React.useCallback(\r\n      (stepIndex: number) => {\r\n        if (stepIndex >= 0 && stepIndex < stepCount) {\r\n          nextStepHandler.current = null;\r\n          setActiveStep(stepIndex);\r\n          onStepChange && onStepChange(stepIndex);\r\n        } else {\r\n          if (__DEV__) {\r\n            logger.log(\r\n              'warn',\r\n              [\r\n                `Invalid step index [${stepIndex}] passed to 'goToStep'. `,\r\n                `Ensure the given stepIndex is not out of boundaries.`,\r\n              ].join(''),\r\n            );\r\n          }\r\n        }\r\n      },\r\n      [stepCount, onStepChange],\r\n    );\r\n\r\n    // Callback to attach the step handler\r\n    const handleStep = React.useRef((handler: Handler) => {\r\n      nextStepHandler.current = handler;\r\n    });\r\n\r\n    const doNextStep = React.useCallback(async () => {\r\n      if (hasNextStep.current && nextStepHandler.current) {\r\n        try {\r\n          setIsLoading(true);\r\n          await nextStepHandler.current();\r\n          setIsLoading(false);\r\n          nextStepHandler.current = null;\r\n          goToNextStep();\r\n        } catch (error) {\r\n          setIsLoading(false);\r\n          throw error;\r\n        }\r\n      } else {\r\n        goToNextStep();\r\n      }\r\n    }, [goToNextStep]);\r\n\r\n    const wizardValue = React.useMemo(\r\n      () => ({\r\n        nextStep: doNextStep,\r\n        previousStep: goToPreviousStep,\r\n        handleStep: handleStep.current,\r\n        isLoading,\r\n        activeStep,\r\n        stepCount,\r\n        isFirstStep: !hasPreviousStep.current,\r\n        isLastStep: !hasNextStep.current,\r\n        goToStep,\r\n      }),\r\n      [\r\n        doNextStep,\r\n        goToPreviousStep,\r\n        isLoading,\r\n        activeStep,\r\n        stepCount,\r\n        goToStep,\r\n      ],\r\n    );\r\n\r\n    const activeStepContent = React.useMemo(() => {\r\n      const reactChildren = React.Children.toArray(children);\r\n\r\n      if (__DEV__) {\r\n        // No steps passed\r\n        if (reactChildren.length === 0) {\r\n          logger.log(\r\n            'warn',\r\n            'Make sure to pass your steps as children in your <Wizard>',\r\n          );\r\n        }\r\n        // The passed start index is invalid\r\n        if (activeStep > reactChildren.length) {\r\n          logger.log('warn', 'An invalid startIndex is passed to <Wizard>');\r\n        }\r\n      }\r\n\r\n      return reactChildren[activeStep];\r\n    }, [activeStep, children]);\r\n\r\n    const enhancedActiveStepContent = React.useMemo(\r\n      () =>\r\n        Wrapper\r\n          ? React.cloneElement(Wrapper, { children: activeStepContent })\r\n          : activeStepContent,\r\n      [Wrapper, activeStepContent],\r\n    );\r\n\r\n    return (\r\n      <WizardContext.Provider value={wizardValue}>\r\n        {header\r\n          ? header({\r\n              activeStep: wizardValue.activeStep,\r\n              stepCount: wizardValue.stepCount,\r\n            })\r\n          : null}\r\n        {enhancedActiveStepContent}\r\n        {footer\r\n          ? footer({\r\n              activeStep: wizardValue.activeStep,\r\n              stepCount: wizardValue.stepCount,\r\n            })\r\n          : null}\r\n      </WizardContext.Provider>\r\n    );\r\n  },\r\n);\r\n\r\nexport default Wizard;\r\n"],"names":["WizardContext","React","displayName","useWizard","context","Error","log","level","message","packageName","console","warn","error","Wizard","header","footer","children","onStepChange","wrapper","Wrapper","startIndex","activeStep","setActiveStep","isLoading","setIsLoading","hasNextStep","hasPreviousStep","nextStepHandler","stepCount","toArray","length","current","goToNextStep","newActiveStepIndex","goToPreviousStep","goToStep","stepIndex","logger","join","handleStep","handler","doNextStep","wizardValue","nextStep","previousStep","isFirstStep","isLastStep","activeStepContent","reactChildren","enhancedActiveStepContent","Provider","value"],"mappings":"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"}